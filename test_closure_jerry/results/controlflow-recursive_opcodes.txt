// // The Computer Language Shootout
// 
// // http://shootout.alioth.debian.org/
// 
// // contributed by Isaac Gouy
// 
// function ack(m,n){
  0:                 meta   12  255          // [to be rewritten]
//    if (m==0) { return n+1; }
//    if (n==0) { return ack(m-1,1); }
//    return ack(m-1, ack(m,n-1) );
// }
// function fib(n) {
//     if (n < 2){ return 1; }
//     return fib(n-2) + fib(n-1);
// }
// function tak(x,y,z) {
//     if (y >= x) return z;
//     return tak(tak(x-1,y,z), tak(y-1,z,x), tak(z-1,x,y));
// }
// var result = 0;
// for ( var i = 3; i <= 5; i++ ) {
//     result += ack(3,i);
//     result += fib(17.0+i);
//     result += tak(3*i+3,2*i+2,i+1);
// }
// var expected = 57775;
// if (result != expected)
//     throw "ERROR: bad result: expected " + expected + " but got " + result;
// 
  0:                 meta   12    6          // [no 'arguments'] [no 'eval']  // REWRITE
  1:         reg_var_decl  128               // var tmp128 .. tmp255;
//    if (m==0) { return n+1; }
//    if (n==0) { return ack(m-1,1); }
//    return ack(m-1, ack(m,n-1) );
// }
// function fib(n) {
//     if (n < 2){ return 1; }
//     return fib(n-2) + fib(n-1);
// }
// function tak(x,y,z) {
//     if (y >= x) return z;
//     return tak(tak(x-1,y,z), tak(y-1,z,x), tak(z-1,x,y));
// }
// var result = 0;
  2:             var_decl                    // var result;
// for ( var i = 3; i <= 5; i++ ) {
  3:             var_decl                    // var i;
//     result += ack(3,i);
//     result += fib(17.0+i);
//     result += tak(3*i+3,2*i+2,i+1);
// }
// var expected = 57775;
  4:             var_decl                    // var expected;
// if (result != expected)
//     throw "ERROR: bad result: expected " + expected + " but got " + result;
// 
  0:          func_decl_n  254               // 
  1:                 meta    2  254          // 
  2:                 meta    2  254          // 
  0:          func_decl_n  254               //  // REWRITE
  3:                 meta    7  255          // function end: 65538;
//    if (m==0) { return n+1; }
  4:                 meta   12  255          // [to be rewritten]
//    if (n==0) { return ack(m-1,1); }
//    return ack(m-1, ack(m,n-1) );
// }
  4:                 meta   12    6          // [no 'arguments'] [no 'eval']  // REWRITE
  5:         reg_var_decl  128               // var tmp128 .. tmp255;
//    if (n==0) { return ack(m-1,1); }
//    return ack(m-1, ack(m,n-1) );
// }
  6:           assignment  130    6          // tmp130 = m : TYPEOF(m);
  7:           assignment  131    1          // tmp131 = 0: SMALLINT;
  8:          equal_value  132  130          // tmp132 = tmp130 == tmp131;
  9:    is_false_jmp_down  132  255          // if (tmp132 == false) goto 65544;
 10:           assignment  130    6          // tmp130 = n : TYPEOF(n);
 11:           assignment  131    1          // tmp131 = 1: SMALLINT;
 12:             addition  132  130          // tmp132 = tmp130 + tmp131;
 13:               retval                    // return tmp132;
//    if (n==0) { return ack(m-1,1); }
  9:    is_false_jmp_down  132    0          // if (tmp132 == false) goto 14; // REWRITE
 14:           assignment  130    6          // tmp130 = n : TYPEOF(n);
 15:           assignment  131    1          // tmp131 = 0: SMALLINT;
 16:          equal_value  132  130          // tmp132 = tmp130 == tmp131;
 17:    is_false_jmp_down  132  255          // if (tmp132 == false) goto 65552;
 18:               call_n  255  254          // 
 19:           assignment  130    6          // tmp130 = m : TYPEOF(m);
 20:           assignment  131    1          // tmp131 = 1: SMALLINT;
 21:         substraction  132  130          // tmp132 = tmp130 - tmp131;
 22:                 meta    2  132          // 
 23:           assignment  130    1          // tmp130 = 1: SMALLINT;
 24:                 meta    2  130          // 
 18:               call_n  130  254          //  // REWRITE
 25:               retval                    // return tmp130;
//    return ack(m-1, ack(m,n-1) );
 17:    is_false_jmp_down  132    0          // if (tmp132 == false) goto 26; // REWRITE
 26:               call_n  255  254          // 
 27:           assignment  130    6          // tmp130 = m : TYPEOF(m);
 28:           assignment  131    1          // tmp131 = 1: SMALLINT;
 29:         substraction  132  130          // tmp132 = tmp130 - tmp131;
 30:                 meta    2  132          // 
 31:               call_n  255  254          // 
 32:                 meta    2  254          // 
 33:           assignment  130    6          // tmp130 = n : TYPEOF(n);
 34:           assignment  131    1          // tmp131 = 1: SMALLINT;
 35:         substraction  132  130          // tmp132 = tmp130 - tmp131;
 36:                 meta    2  132          // 
 31:               call_n  130  254          //  // REWRITE
 37:                 meta    2  130          // 
 26:               call_n  130  254          //  // REWRITE
 38:               retval                    // return tmp130;
// }
  5:         reg_var_decl  128               // var tmp128 .. tmp132; // REWRITE
 39:                  ret                    // ret;
  3:                 meta    7    0          // function end: 40; // REWRITE
// function fib(n) {
  0:          func_decl_n  254               // 
  1:                 meta    2  254          // 
  0:          func_decl_n  254               //  // REWRITE
  2:                 meta    7  255          // function end: 65537;
//     if (n < 2){ return 1; }
  3:                 meta   12  255          // [to be rewritten]
//     return fib(n-2) + fib(n-1);
// }
  3:                 meta   12    6          // [no 'arguments'] [no 'eval']  // REWRITE
  4:         reg_var_decl  128               // var tmp128 .. tmp255;
//     return fib(n-2) + fib(n-1);
// }
  5:           assignment  130    6          // tmp130 = n : TYPEOF(n);
  6:           assignment  131    1          // tmp131 = 2: SMALLINT;
  7:            less_than  132  130          // tmp132 = tmp130 < tmp131;
  8:    is_false_jmp_down  132  255          // if (tmp132 == false) goto 65543;
  9:           assignment  130    1          // tmp130 = 1: SMALLINT;
 10:               retval                    // return tmp130;
//     return fib(n-2) + fib(n-1);
  8:    is_false_jmp_down  132    0          // if (tmp132 == false) goto 11; // REWRITE
 11:               call_n  255  254          // 
 12:           assignment  130    6          // tmp130 = n : TYPEOF(n);
 13:           assignment  131    1          // tmp131 = 2: SMALLINT;
 14:         substraction  132  130          // tmp132 = tmp130 - tmp131;
 15:                 meta    2  132          // 
 11:               call_n  130  254          //  // REWRITE
 16:               call_n  255  254          // 
 17:           assignment  131    6          // tmp131 = n : TYPEOF(n);
 18:           assignment  132    1          // tmp132 = 1: SMALLINT;
 19:         substraction  133  131          // tmp133 = tmp131 - tmp132;
 20:                 meta    2  133          // 
 16:               call_n  131  254          //  // REWRITE
 21:             addition  132  130          // tmp132 = tmp130 + tmp131;
 22:               retval                    // return tmp132;
// }
  4:         reg_var_decl  128               // var tmp128 .. tmp133; // REWRITE
 23:                  ret                    // ret;
  2:                 meta    7    0          // function end: 24; // REWRITE
// function tak(x,y,z) {
  0:          func_decl_n  254               // 
  1:                 meta    2  254          // 
  2:                 meta    2  254          // 
  3:                 meta    2  254          // 
  0:          func_decl_n  254               //  // REWRITE
  4:                 meta    7  255          // function end: 65539;
//     if (y >= x) return z;
  5:                 meta   12  255          // [to be rewritten]
//     return tak(tak(x-1,y,z), tak(y-1,z,x), tak(z-1,x,y));
// }
  5:                 meta   12    6          // [no 'arguments'] [no 'eval']  // REWRITE
  6:         reg_var_decl  128               // var tmp128 .. tmp255;
//     return tak(tak(x-1,y,z), tak(y-1,z,x), tak(z-1,x,y));
// }
  7:           assignment  130    6          // tmp130 = y : TYPEOF(y);
  8: greater_or_equal_than  131  130          // tmp131 = tmp130 >= x;
  9:    is_false_jmp_down  131  255          // if (tmp131 == false) goto 65544;
 10:               retval                    // return z;
//     return tak(tak(x-1,y,z), tak(y-1,z,x), tak(z-1,x,y));
  9:    is_false_jmp_down  131    0          // if (tmp131 == false) goto 11; // REWRITE
 11:               call_n  255  254          // 
 12:               call_n  255  254          // 
 13:           assignment  130    6          // tmp130 = x : TYPEOF(x);
 14:           assignment  131    1          // tmp131 = 1: SMALLINT;
 15:         substraction  132  130          // tmp132 = tmp130 - tmp131;
 16:                 meta    2  132          // 
 17:                 meta    2  254          // 
 18:                 meta    2  254          // 
 12:               call_n  130  254          //  // REWRITE
 19:                 meta    2  130          // 
 20:               call_n  255  254          // 
 21:           assignment  130    6          // tmp130 = y : TYPEOF(y);
 22:           assignment  131    1          // tmp131 = 1: SMALLINT;
 23:         substraction  132  130          // tmp132 = tmp130 - tmp131;
 24:                 meta    2  132          // 
 25:                 meta    2  254          // 
 26:                 meta    2  254          // 
 20:               call_n  130  254          //  // REWRITE
 27:                 meta    2  130          // 
 28:               call_n  255  254          // 
 29:           assignment  130    6          // tmp130 = z : TYPEOF(z);
 30:           assignment  131    1          // tmp131 = 1: SMALLINT;
 31:         substraction  132  130          // tmp132 = tmp130 - tmp131;
 32:                 meta    2  132          // 
 33:                 meta    2  254          // 
 34:                 meta    2  254          // 
 28:               call_n  130  254          //  // REWRITE
 35:                 meta    2  130          // 
 11:               call_n  130  254          //  // REWRITE
 36:               retval                    // return tmp130;
// }
  6:         reg_var_decl  128               // var tmp128 .. tmp132; // REWRITE
 37:                  ret                    // ret;
  4:                 meta    7    0          // function end: 38; // REWRITE
// var result = 0;
  5:           assignment  130    1          // tmp130 = 0: SMALLINT;
  6:           assignment  254    6          // result = tmp130 : TYPEOF(tmp130);
// for ( var i = 3; i <= 5; i++ ) {
  7:           assignment  130    1          // tmp130 = 3: SMALLINT;
  8:           assignment  254    6          // i = tmp130 : TYPEOF(tmp130);
  9:             jmp_down  255               // goto 65544;
//     result += ack(3,i);
 10:               call_n  255  254          // 
 11:           assignment  130    1          // tmp130 = 3: SMALLINT;
 12:                 meta    2  130          // 
 13:                 meta    2  254          // 
 10:               call_n  130  254          //  // REWRITE
 14:             addition  254  254          // result = result + tmp130;
 15:           assignment  131    6          // tmp131 = result : TYPEOF(result);
//     result += fib(17.0+i);
 16:               call_n  255  254          // 
 17:           assignment  130    3          // tmp130 = 17: NUMBER;
 18:             addition  131  130          // tmp131 = tmp130 + i;
 19:                 meta    2  131          // 
 16:               call_n  130  254          //  // REWRITE
 20:             addition  254  254          // result = result + tmp130;
 21:           assignment  131    6          // tmp131 = result : TYPEOF(result);
//     result += tak(3*i+3,2*i+2,i+1);
 22:               call_n  255  254          // 
 23:           assignment  130    1          // tmp130 = 3: SMALLINT;
 24:       multiplication  131  130          // tmp131 = tmp130 * i;
 25:           assignment  132    1          // tmp132 = 3: SMALLINT;
 26:             addition  133  131          // tmp133 = tmp131 + tmp132;
 27:                 meta    2  133          // 
 28:           assignment  130    1          // tmp130 = 2: SMALLINT;
 29:       multiplication  131  130          // tmp131 = tmp130 * i;
 30:           assignment  132    1          // tmp132 = 2: SMALLINT;
 31:             addition  133  131          // tmp133 = tmp131 + tmp132;
 32:                 meta    2  133          // 
 33:           assignment  130    6          // tmp130 = i : TYPEOF(i);
 34:           assignment  131    1          // tmp131 = 1: SMALLINT;
 35:             addition  132  130          // tmp132 = tmp130 + tmp131;
 36:                 meta    2  132          // 
 22:               call_n  130  254          //  // REWRITE
 37:             addition  254  254          // result = result + tmp130;
 38:           assignment  131    6          // tmp131 = result : TYPEOF(result);
// }
 39:            post_incr  132               // tmp132 = i++;
  9:             jmp_down    0               // goto 40; // REWRITE
 40:           assignment  133    6          // tmp133 = i : TYPEOF(i);
 41:           assignment  134    1          // tmp134 = 5: SMALLINT;
 42:   less_or_equal_than  135  133          // tmp135 = tmp133 <= tmp134;
 43:       is_true_jmp_up  135    0          // if (tmp135) goto 10;
// var expected = 57775;
 44:           assignment  130    3          // tmp130 = 57775: NUMBER;
 45:           assignment  254    6          // expected = tmp130 : TYPEOF(tmp130);
// if (result != expected)
 46:           assignment  130    6          // tmp130 = result : TYPEOF(result);
 47:      not_equal_value  131  130          // tmp131 = tmp130 != expected;
 48:    is_false_jmp_down  131  255          // if (tmp131 == false) goto 65583;
//     throw "ERROR: bad result: expected " + expected + " but got " + result;
 49:           assignment  130    5          // tmp130 = 'ERROR: bad result: expected ': STRING;
 50:             addition  131  130          // tmp131 = tmp130 + expected;
 51:           assignment  132    5          // tmp132 = ' but got ': STRING;
 52:             addition  133  131          // tmp133 = tmp131 + tmp132;
 53:             addition  134  133          // tmp134 = tmp133 + result;
 54:          throw_value                    // throw tmp134;
// 
 48:    is_false_jmp_down  131    0          // if (tmp131 == false) goto 55; // REWRITE
  1:         reg_var_decl  128               // var tmp128 .. tmp135; // REWRITE
 55:                  ret                    // ret;
LITERALS:
0x84ec54 [ 12] ack : STRING
0x84ec60 [  4] m : MAGIC STRING [id=201] 
0x84ec64 [  8] n : STRING
0x84ec6c [ 12] fib : STRING
0x84ec78 [ 12] tak : STRING
0x84ec98 [  8] x : STRING
0x84eca0 [  8] y : STRING
0x84eca8 [  8] z : STRING
0x84ecb0 [ 12] result : STRING
0x84ecbc [  4] i : MAGIC STRING [id=200] 
0x84ecd4 [ 12] 17„ : NUMBER
0x84ece0 [ 16] expected : STRING
0x84ecf0 [ 12] 57775 : NUMBER
0x84ecfc [ 36] ERROR: bad result: expected  : STRING
0x84ed34 [ 16]  but got  : STRING
0x84ed58 [ 40]  : EMPTY RECORD
  0:                 meta   12    6          // [no 'arguments'] [no 'eval'] 
  1:         reg_var_decl  128               // var tmp128 .. tmp135;
  2:             var_decl                    // var result;
  3:             var_decl                    // var i;
  4:             var_decl                    // var expected;
  5:          func_decl_n    3               // 
  6:                 meta    2    4          // 
  7:                 meta    2    5          // function ack (m, n);
  8:                 meta    7    0          // function end: 45;
  9:                 meta   12    6          // [no 'arguments'] [no 'eval'] 
 10:         reg_var_decl  128               // var tmp128 .. tmp132;
 11:           assignment  130    6          // tmp130 = m : TYPEOF(m);
 12:           assignment  131    1          // tmp131 = 0: SMALLINT;
 13:          equal_value  132  130          // tmp132 = tmp130 == tmp131;
 14:    is_false_jmp_down  132    0          // if (tmp132 == false) goto 19;
 15:           assignment  130    6          // tmp130 = n : TYPEOF(n);
 16:           assignment  131    1          // tmp131 = 1: SMALLINT;
 17:             addition  132  130          // tmp132 = tmp130 + tmp131;
 18:               retval                    // return tmp132;
 19:           assignment  130    6          // tmp130 = n : TYPEOF(n);
 20:           assignment  131    1          // tmp131 = 0: SMALLINT;
 21:          equal_value  132  130          // tmp132 = tmp130 == tmp131;
 22:    is_false_jmp_down  132    0          // if (tmp132 == false) goto 31;
 23:               call_n  130    3          // 
 24:           assignment  130    6          // tmp130 = m : TYPEOF(m);
 25:           assignment  131    1          // tmp131 = 1: SMALLINT;
 26:         substraction  132  130          // tmp132 = tmp130 - tmp131;
 27:                 meta    2  132          // 
 28:           assignment  130    1          // tmp130 = 1: SMALLINT;
 29:                 meta    2  130          // tmp130 = ack (tmp132, tmp130);
 30:               retval                    // return tmp130;
 31:               call_n  130    3          // 
 32:           assignment  130    6          // tmp130 = m : TYPEOF(m);
 33:           assignment  131    1          // tmp131 = 1: SMALLINT;
 34:         substraction  132  130          // tmp132 = tmp130 - tmp131;
 35:                 meta    2  132          // 
 36:               call_n  130    3          // 
 37:                 meta    2    4          // 
 38:           assignment  130    6          // tmp130 = n : TYPEOF(n);
 39:           assignment  131    1          // tmp131 = 1: SMALLINT;
 40:         substraction  132  130          // tmp132 = tmp130 - tmp131;
 41:                 meta    2  132          // tmp130 = ack (m, tmp132);
 42:                 meta    2  130          // 
 43:               retval                    // return tmp130;
 44:                  ret                    // ret;
 45:          func_decl_n    6               // 
 46:                 meta    2    5          // function fib (n);
 47:                 meta    7    0          // function end: 69;
 48:                 meta   12    6          // [no 'arguments'] [no 'eval'] 
 49:         reg_var_decl  128               // var tmp128 .. tmp133;
 50:           assignment  130    6          // tmp130 = n : TYPEOF(n);
 51:           assignment  131    1          // tmp131 = 2: SMALLINT;
 52:            less_than  132  130          // tmp132 = tmp130 < tmp131;
 53:    is_false_jmp_down  132    0          // if (tmp132 == false) goto 56;
 54:           assignment  130    1          // tmp130 = 1: SMALLINT;
 55:               retval                    // return tmp130;
 56:               call_n  130    6          // 
 57:           assignment  130    6          // tmp130 = n : TYPEOF(n);
 58:           assignment  131    1          // tmp131 = 2: SMALLINT;
 59:         substraction  132  130          // tmp132 = tmp130 - tmp131;
 60:                 meta    2  132          // tmp130 = fib (tmp132);
 61:               call_n  131    6          // 
 62:           assignment  131    6          // tmp131 = n : TYPEOF(n);
 63:           assignment  132    1          // tmp132 = 1: SMALLINT;
 64:         substraction  133  131          // tmp133 = tmp131 - tmp132;
 65:                 meta    2  133          // tmp131 = fib (tmp133);
 66:             addition  132  130          // tmp132 = tmp130 + tmp131;
 67:               retval                    // return tmp132;
 68:                  ret                    // ret;
 69:          func_decl_n    0               // 
 70:                 meta    2    1          // 
 71:                 meta    2    2          // 
 72:                 meta    2    3          // function tak (x, y, z);
 73:                 meta    7    0          // function end: 107;
 74:                 meta   12    6          // [no 'arguments'] [no 'eval'] 
 75:         reg_var_decl  128               // var tmp128 .. tmp132;
 76:           assignment  130    6          // tmp130 = y : TYPEOF(y);
 77: greater_or_equal_than  131  130          // tmp131 = tmp130 >= x;
 78:    is_false_jmp_down  131    0          // if (tmp131 == false) goto 80;
 79:               retval                    // return z;
 80:               call_n  130    0          // 
 81:               call_n  130    0          // 
 82:           assignment  130    6          // tmp130 = x : TYPEOF(x);
 83:           assignment  131    1          // tmp131 = 1: SMALLINT;
 84:         substraction  132  130          // tmp132 = tmp130 - tmp131;
 85:                 meta    2  132          // 
 86:                 meta    2    2          // 
 87:                 meta    2    3          // tmp130 = tak (tmp132, y, z);
 88:                 meta    2  130          // 
 89:               call_n  130    0          // 
 90:           assignment  130    6          // tmp130 = y : TYPEOF(y);
 91:           assignment  131    1          // tmp131 = 1: SMALLINT;
 92:         substraction  132  130          // tmp132 = tmp130 - tmp131;
 93:                 meta    2  132          // 
 94:                 meta    2    3          // 
 95:                 meta    2    1          // tmp130 = tak (tmp132, z, x);
 96:                 meta    2  130          // 
 97:               call_n  130    0          // 
 98:           assignment  130    6          // tmp130 = z : TYPEOF(z);
 99:           assignment  131    1          // tmp131 = 1: SMALLINT;
100:         substraction  132  130          // tmp132 = tmp130 - tmp131;
101:                 meta    2  132          // 
102:                 meta    2    1          // 
103:                 meta    2    2          // tmp130 = tak (tmp132, x, y);
104:                 meta    2  130          // 
105:               retval                    // return tmp130;
106:                  ret                    // ret;
107:           assignment  130    1          // tmp130 = 0: SMALLINT;
108:           assignment    4    6          // result = tmp130 : TYPEOF(tmp130);
109:           assignment  130    1          // tmp130 = 3: SMALLINT;
110:           assignment    5    6          // i = tmp130 : TYPEOF(tmp130);
111:             jmp_down    0               // goto 142;
112:               call_n  130    6          // 
113:           assignment  130    1          // tmp130 = 3: SMALLINT;
114:                 meta    2  130          // 
115:                 meta    2    5          // tmp130 = ack (tmp130, i);
116:             addition    4    4          // result = result + tmp130;
117:           assignment  131    6          // tmp131 = result : TYPEOF(result);
118:               call_n  130    7          // 
119:           assignment  130    3          // tmp130 = 17: NUMBER;
120:             addition  131  130          // tmp131 = tmp130 + i;
121:                 meta    2  131          // tmp130 = fib (tmp131);
122:             addition    4    4          // result = result + tmp130;
123:           assignment  131    6          // tmp131 = result : TYPEOF(result);
124:               call_n  130    0          // 
125:           assignment  130    1          // tmp130 = 3: SMALLINT;
126:       multiplication  131  130          // tmp131 = tmp130 * i;
127:           assignment  132    1          // tmp132 = 3: SMALLINT;
128:             addition  133  131          // tmp133 = tmp131 + tmp132;
129:                 meta    2  133          // 
130:           assignment  130    1          // tmp130 = 2: SMALLINT;
131:       multiplication  131  130          // tmp131 = tmp130 * i;
132:           assignment  132    1          // tmp132 = 2: SMALLINT;
133:             addition  133  131          // tmp133 = tmp131 + tmp132;
134:                 meta    2  133          // 
135:           assignment  130    6          // tmp130 = i : TYPEOF(i);
136:           assignment  131    1          // tmp131 = 1: SMALLINT;
137:             addition  132  130          // tmp132 = tmp130 + tmp131;
138:                 meta    2  132          // tmp130 = tak (tmp133, tmp133, tmp132);
139:             addition    1    1          // result = result + tmp130;
140:           assignment  131    6          // tmp131 = result : TYPEOF(result);
141:            post_incr  132               // tmp132 = i++;
142:           assignment  133    6          // tmp133 = i : TYPEOF(i);
143:           assignment  134    1          // tmp134 = 5: SMALLINT;
144:   less_or_equal_than  135  133          // tmp135 = tmp133 <= tmp134;
145:       is_true_jmp_up  135    0          // if (tmp135) goto 112;
146:           assignment  130    3          // tmp130 = 57775: NUMBER;
147:           assignment    3    6          // expected = tmp130 : TYPEOF(tmp130);
148:           assignment  130    6          // tmp130 = result : TYPEOF(result);
149:      not_equal_value  131  130          // tmp131 = tmp130 != expected;
150:    is_false_jmp_down  131    0          // if (tmp131 == false) goto 157;
151:           assignment  130    5          // tmp130 = 'ERROR: bad result: expected ': STRING;
152:             addition  131  130          // tmp131 = tmp130 + expected;
153:           assignment  132    5          // tmp132 = ' but got ': STRING;
154:             addition  133  131          // tmp133 = tmp131 + tmp132;
155:             addition  134  133          // tmp134 = tmp133 + result;
156:          throw_value                    // throw tmp134;
157:                  ret                    // ret;
